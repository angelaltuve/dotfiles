#!/bin/sh

# Syncs repositories and downloads updates, meant to be run as a cronjob.

notify-send " Repository Sync" "Checking for package updates..."

sudo pacman -Syyuw --noconfirm || notify-send "Error downloading updates."

# Check your internet connection, if pacman is already running, or run update manually to see errors."
kill -42 "$(pidof dwmblocks)"

if [ "$(checkupdates | wc -l )" -gt 0 ]; then
  notify-send "󱧕 Repository Sync" "Updates available. Click statusbar icon (󱧕) for update."
else
  notify-send " Repository Sync" "Sync complete. No new packages for update."
fi
